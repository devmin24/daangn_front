{"ast":null,"code":"import { isRefObject } from '@fluentui/react-component-ref';\nimport React from 'react';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nvar CLASS_NAME_DELITIMITER = /\\s+/;\n/**\n * Accepts a set of ref objects that contain classnames as a string and returns an array of unique\n * classNames.\n *\n * @param {Set<React.RefObject>|undefined} classNameRefs\n * @returns String[]\n */\n\nexport function computeClassNames(classNameRefs) {\n  var classNames = [];\n\n  if (classNameRefs) {\n    classNameRefs.forEach(function (classNameRef) {\n      if (typeof classNameRef.current === 'string') {\n        var classNamesForRef = classNameRef.current.split(CLASS_NAME_DELITIMITER);\n        classNamesForRef.forEach(function (className) {\n          classNames.push(className);\n        });\n      }\n    });\n    return classNames.filter(function (className, i, array) {\n      return className.length > 0 && array.indexOf(className) === i;\n    });\n  }\n\n  return [];\n}\n/**\n * Computes classnames that should be removed and added to a node based on input differences.\n *\n * @param {String[]} prevClassNames\n * @param {String[]} currentClassNames\n */\n\nexport function computeClassNamesDifference(prevClassNames, currentClassNames) {\n  return [currentClassNames.filter(function (className) {\n    return prevClassNames.indexOf(className) === -1;\n  }), prevClassNames.filter(function (className) {\n    return currentClassNames.indexOf(className) === -1;\n  })];\n}\nvar prevClassNames = new Map();\n/**\n * @param {HTMLElement} node\n * @param {Set<React.RefObject>|undefined} classNameRefs\n */\n\nexport var handleClassNamesChange = function handleClassNamesChange(node, classNameRefs) {\n  var currentClassNames = computeClassNames(classNameRefs);\n\n  var _computeClassNamesDif = computeClassNamesDifference(prevClassNames.get(node) || [], currentClassNames),\n      forAdd = _computeClassNamesDif[0],\n      forRemoval = _computeClassNamesDif[1];\n\n  if (node) {\n    forAdd.forEach(function (className) {\n      return node.classList.add(className);\n    });\n    forRemoval.forEach(function (className) {\n      return node.classList.remove(className);\n    });\n  }\n\n  prevClassNames.set(node, currentClassNames);\n};\nexport var NodeRegistry = function NodeRegistry() {\n  var _this = this;\n\n  this.add = function (node, classNameRef) {\n    if (_this.nodes.has(node)) {\n      var _set = _this.nodes.get(node);\n\n      _set.add(classNameRef);\n\n      return;\n    } // IE11 does not support constructor params\n\n\n    var set = new Set();\n    set.add(classNameRef);\n\n    _this.nodes.set(node, set);\n  };\n\n  this.del = function (node, classNameRef) {\n    if (!_this.nodes.has(node)) {\n      return;\n    }\n\n    var set = _this.nodes.get(node);\n\n    if (set.size === 1) {\n      _this.nodes.delete(node);\n\n      return;\n    }\n\n    set.delete(classNameRef);\n  };\n\n  this.emit = function (node, callback) {\n    callback(node, _this.nodes.get(node));\n  };\n\n  this.nodes = new Map();\n};\nvar nodeRegistry = new NodeRegistry();\n/**\n * A React hooks that allows to manage classNames on a DOM node in declarative manner. Accepts\n * a HTML element or React ref objects with it.\n *\n * @param {HTMLElement|React.RefObject} node\n * @param {String} className\n */\n\nexport default function useClassNamesOnNode(node, className) {\n  var classNameRef = React.useRef();\n  var isMounted = React.useRef(false);\n  useIsomorphicLayoutEffect(function () {\n    classNameRef.current = className;\n\n    if (isMounted.current) {\n      var element = isRefObject(node) ? node.current : node;\n      nodeRegistry.emit(element, handleClassNamesChange);\n    }\n\n    isMounted.current = true;\n  }, [className]);\n  useIsomorphicLayoutEffect(function () {\n    var element = isRefObject(node) ? node.current : node;\n    nodeRegistry.add(element, classNameRef);\n    nodeRegistry.emit(element, handleClassNamesChange);\n    return function () {\n      nodeRegistry.del(element, classNameRef);\n      nodeRegistry.emit(element, handleClassNamesChange);\n    };\n  }, [node]);\n}","map":{"version":3,"sources":["/Users/parkminkyung/sparta_react/daangnmarket/node_modules/semantic-ui-react/dist/es/lib/hooks/useClassNamesOnNode.js"],"names":["isRefObject","React","useIsomorphicLayoutEffect","CLASS_NAME_DELITIMITER","computeClassNames","classNameRefs","classNames","forEach","classNameRef","current","classNamesForRef","split","className","push","filter","i","array","length","indexOf","computeClassNamesDifference","prevClassNames","currentClassNames","Map","handleClassNamesChange","node","_computeClassNamesDif","get","forAdd","forRemoval","classList","add","remove","set","NodeRegistry","_this","nodes","has","_set","Set","del","size","delete","emit","callback","nodeRegistry","useClassNamesOnNode","useRef","isMounted","element"],"mappings":"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","sourcesContent":["import { isRefObject } from '@fluentui/react-component-ref';\nimport React from 'react';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nvar CLASS_NAME_DELITIMITER = /\\s+/;\n/**\n * Accepts a set of ref objects that contain classnames as a string and returns an array of unique\n * classNames.\n *\n * @param {Set<React.RefObject>|undefined} classNameRefs\n * @returns String[]\n */\n\nexport function computeClassNames(classNameRefs) {\n  var classNames = [];\n\n  if (classNameRefs) {\n    classNameRefs.forEach(function (classNameRef) {\n      if (typeof classNameRef.current === 'string') {\n        var classNamesForRef = classNameRef.current.split(CLASS_NAME_DELITIMITER);\n        classNamesForRef.forEach(function (className) {\n          classNames.push(className);\n        });\n      }\n    });\n    return classNames.filter(function (className, i, array) {\n      return className.length > 0 && array.indexOf(className) === i;\n    });\n  }\n\n  return [];\n}\n/**\n * Computes classnames that should be removed and added to a node based on input differences.\n *\n * @param {String[]} prevClassNames\n * @param {String[]} currentClassNames\n */\n\nexport function computeClassNamesDifference(prevClassNames, currentClassNames) {\n  return [currentClassNames.filter(function (className) {\n    return prevClassNames.indexOf(className) === -1;\n  }), prevClassNames.filter(function (className) {\n    return currentClassNames.indexOf(className) === -1;\n  })];\n}\nvar prevClassNames = new Map();\n/**\n * @param {HTMLElement} node\n * @param {Set<React.RefObject>|undefined} classNameRefs\n */\n\nexport var handleClassNamesChange = function handleClassNamesChange(node, classNameRefs) {\n  var currentClassNames = computeClassNames(classNameRefs);\n\n  var _computeClassNamesDif = computeClassNamesDifference(prevClassNames.get(node) || [], currentClassNames),\n      forAdd = _computeClassNamesDif[0],\n      forRemoval = _computeClassNamesDif[1];\n\n  if (node) {\n    forAdd.forEach(function (className) {\n      return node.classList.add(className);\n    });\n    forRemoval.forEach(function (className) {\n      return node.classList.remove(className);\n    });\n  }\n\n  prevClassNames.set(node, currentClassNames);\n};\nexport var NodeRegistry = function NodeRegistry() {\n  var _this = this;\n\n  this.add = function (node, classNameRef) {\n    if (_this.nodes.has(node)) {\n      var _set = _this.nodes.get(node);\n\n      _set.add(classNameRef);\n\n      return;\n    } // IE11 does not support constructor params\n\n\n    var set = new Set();\n    set.add(classNameRef);\n\n    _this.nodes.set(node, set);\n  };\n\n  this.del = function (node, classNameRef) {\n    if (!_this.nodes.has(node)) {\n      return;\n    }\n\n    var set = _this.nodes.get(node);\n\n    if (set.size === 1) {\n      _this.nodes.delete(node);\n\n      return;\n    }\n\n    set.delete(classNameRef);\n  };\n\n  this.emit = function (node, callback) {\n    callback(node, _this.nodes.get(node));\n  };\n\n  this.nodes = new Map();\n};\nvar nodeRegistry = new NodeRegistry();\n/**\n * A React hooks that allows to manage classNames on a DOM node in declarative manner. Accepts\n * a HTML element or React ref objects with it.\n *\n * @param {HTMLElement|React.RefObject} node\n * @param {String} className\n */\n\nexport default function useClassNamesOnNode(node, className) {\n  var classNameRef = React.useRef();\n  var isMounted = React.useRef(false);\n  useIsomorphicLayoutEffect(function () {\n    classNameRef.current = className;\n\n    if (isMounted.current) {\n      var element = isRefObject(node) ? node.current : node;\n      nodeRegistry.emit(element, handleClassNamesChange);\n    }\n\n    isMounted.current = true;\n  }, [className]);\n  useIsomorphicLayoutEffect(function () {\n    var element = isRefObject(node) ? node.current : node;\n    nodeRegistry.add(element, classNameRef);\n    nodeRegistry.emit(element, handleClassNamesChange);\n    return function () {\n      nodeRegistry.del(element, classNameRef);\n      nodeRegistry.emit(element, handleClassNamesChange);\n    };\n  }, [node]);\n}"]},"metadata":{},"sourceType":"module"}